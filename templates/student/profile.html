{% extends 'student/base.html' %}
{% block content %}
{% load static %}
<!-- Start Content-->
<div class="container-fluid">

<!-- start page title -->
<div class="row">
<div class="col-12">
    <div class="page-title-box">
        
        <h4 class="page-title">Profile</h4>
    </div>
</div>
</div>     
<!-- end page title --> 

<div class="row">
<div class="col-xl-4 col-lg-5">
    <div class="card text-center">
        <div class="card-body">
            <img src="{{ request.user.student_photo }}" class="rounded-circle avatar-lg img-thumbnail"
            alt="profile-image">

            <h4 class="mb-0 mt-2">{{request.user.fullname}}</h4>
            <p class="text-muted font-14">{{request.user.username}}</p>

            <button type="button" class="btn btn-info btn-sm mb-2">Edit</button>

            <div class="text-left mt-3">
                <h4 class="font-13 text-uppercase">About Me :</h4>
                <p class="text-muted font-13 mb-3">
                    Hi I'm {{request.user.fullname}}, {{request.user.batch.name}} student of Packapeer Academy as the role of {{request.user.domain}}
                </p>
                <p class="text-muted mb-2 font-13"><strong>Full Name :</strong> <span class="ml-2">{{request.user.fullname}}</span></p>

                <p class="text-muted mb-2 font-13"><strong>Mobile :</strong><span class="ml-2">{{request.user.phone}}</span></p>

                <p class="text-muted mb-2 font-13"><strong>Email :</strong> <span class="ml-2 ">{{request.user.email}}</span></p>

                <p class="text-muted mb-1 font-13"><strong>Location :</strong> <span class="ml-2">{{request.user.address}}</span></p>
            </div>

            <ul class="social-list list-inline mt-3 mb-0">
                <li class="list-inline-item">
                    <a href="javascript: void(0);" class="social-list-item border-primary text-primary"><i
                            class="mdi mdi-facebook"></i></a>
                </li>
                <li class="list-inline-item">
                    <a href="javascript: void(0);" class="social-list-item border-danger text-danger"><i
                            class="mdi mdi-google"></i></a>
                </li>
                <li class="list-inline-item">
                    <a href="javascript: void(0);" class="social-list-item border-info text-info"><i
                            class="mdi mdi-twitter"></i></a>
                </li>
            </ul>
        </div> <!-- end card-body -->
    </div> <!-- end card -->

    <!-- Messages-->
    

</div> <!-- end col-->

<div class="col-xl-8 col-lg-7">
    <div class="card">
        <div class="card-body">
            <ul class="nav nav-pills bg-nav-pills nav-justified mb-3">
                
                <li class="nav-item">
                    <a href="" data-toggle="tab" aria-expanded="true" class="nav-link rounded-0 active">
                        Timeline
                    </a>
                </li>
                
            </ul>
            <div class="tab-content">
                <!-- end about me section content -->

                <div class="tab-pane show active" id="timeline">

                    <!-- comment box -->
                    <div class="border rounded mt-2 mb-3">
                        <form action="#" class="comment-area-box">
                            <textarea rows="3" class="form-control border-0 resize-none"  id="text" placeholder="Write something...." required></textarea>
                            <span id="texterror" style="color: red;"></span>
                            <div class="p-2 bg-light d-flex justify-content-between align-items-center">
                                <div>
                                    <a  class="btn btn-sm px-2 font-16 btn-light"><i onclick="file()" class="mdi mdi-plus" ></i></a>
                                    <input id="file" type="file" style="display: none;">
                                    
                                </div>
                                <button type="button" id="post" class="btn btn-sm btn-dark waves-effect">Post</button>
                            </div>
                        </form>
                    </div> <!-- end .border-->
                    <!-- end comment box -->

                    <!-- Story Box-->
                    <div class="border border-light rounded p-2 mb-3">
                        <div class="media">
                            <img class="mr-2 rounded-circle" src="{% static 'assets/images/users/avatar-3.jpg' %}"
                                alt="Generic placeholder image" height="32">
                            <div class="media-body">
                                <h5 class="m-0">Jeremy Tomlinson</h5>
                                <p class="text-muted"><small>about 2 minuts ago</small></p>
                            </div>
                        </div>
                        <p>Story based around the idea of time lapse, animation to post soon!</p>

                        <img src="{% static 'assets/images/small/small-1.jpg' %}" alt="post-img" class="rounded mr-1"
                            height="60" />
                        <img src="{% static 'assets/images/small/small-2.jpg' %}" alt="post-img" class="rounded mr-1"
                            height="60" />
                        <img src="{% static 'assets/images/small/small-3.jpg' %}" alt="post-img" class="rounded"
                            height="60" />

                        <div class="mt-2">
                            <a href="javascript: void(0);" class="btn btn-sm btn-link text-muted"><i
                                    class="mdi mdi-reply"></i> Reply</a>
                            <a href="javascript: void(0);" class="btn btn-sm btn-link text-muted"><i
                                    class="mdi mdi-heart-outline"></i> Like</a>
                            <a href="javascript: void(0);" class="btn btn-sm btn-link text-muted"><i
                                    class="mdi mdi-share-variant"></i> Share</a>
                        </div>
                    </div>

                    <!-- Story Box-->
                    <div class="border border-light rounded p-2 mb-3">
                        <div class="media">
                            <img class="mr-2 rounded-circle" src="{% static 'assets/images/users/avatar-4.jpg' %}"
                                alt="Generic placeholder image" height="32">
                            <div class="media-body">
                                <h5 class="m-0">Thelma Fridley</h5>
                                <p class="text-muted"><small>about 1 hour ago</small></p>
                            </div>
                        </div>
                        <div class="font-16 text-center font-italic text-dark">
                            <i class="mdi mdi-format-quote-open font-20"></i> Cras sit amet nibh libero, in
                            gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras
                            purus odio, vestibulum in vulputate at, tempus viverra turpis. Duis
                            sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper
                            porta. Mauris massa.
                        </div>

                        <div class="mx-n2 p-2 mt-3 bg-light">
                            <div class="media">
                                <img class="mr-2 rounded-circle" src="{% static 'assets/images/users/avatar-3.jpg' %}"
                                    alt="Generic placeholder image" height="32">
                                <div class="media-body">
                                    <h5 class="mt-0">Jeremy Tomlinson <small class="text-muted">3 hours ago</small></h5>
                                    Nice work, makes me think of The Money Pit.

                                    <br/>
                                    <a href="javascript: void(0);" class="text-muted font-13 d-inline-block mt-2"><i
                                        class="mdi mdi-reply"></i> Reply</a>

                                    <div class="media mt-3">
                                        <a class="pr-2" href="#">
                                            <img src="{% static 'assets/images/users/avatar-4.jpg' %}" class="rounded-circle"
                                                alt="Generic placeholder image" height="32">
                                        </a>
                                        <div class="media-body">
                                            <h5 class="mt-0">Thelma Fridley <small class="text-muted">5 hours ago</small></h5>
                                            i'm in the middle of a timelapse animation myself! (Very different though.) Awesome stuff.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="media mt-2">
                                <a class="pr-2" href="#">
                                    <img src="{% static 'assets/images/users/avatar-1.jpg' %}" class="rounded-circle"
                                        alt="Generic placeholder image" height="32">
                                </a>
                                <div class="media-body">
                                    <input type="text" id="simpleinput" class="form-control border-0 form-control-sm" placeholder="Add comment">
                                </div>
                            </div>
                        </div>

                        <div class="mt-2">
                            <a href="javascript: void(0);" class="btn btn-sm btn-link text-danger"><i
                                    class="mdi mdi-heart"></i> Like (28)</a>
                            <a href="javascript: void(0);" class="btn btn-sm btn-link text-muted"><i
                                    class="mdi mdi-share-variant"></i> Share</a>
                        </div>
                    </div>

                    <!-- Story Box-->
                    <div class="border border-light p-2 mb-3">
                        <div class="media">
                            <img class="mr-2 rounded-circle" src="{% static 'assets/images/users/avatar-6.jpg' %}"
                                alt="Generic placeholder image" height="32">
                            <div class="media-body">
                                <h5 class="m-0">Martin Williamson</h5>
                                <p class="text-muted"><small>15 hours ago</small></p>
                            </div>
                        </div>
                        <p>The parallax is a little odd but O.o that house build is awesome!!</p>

                        <iframe src='https://player.vimeo.com/video/87993762' height='300' class="img-fluid border-0"></iframe>
                    </div>

                    <div class="text-center">
                        <a href="javascript:void(0);" class="text-danger"><i class="mdi mdi-spin mdi-loading mr-1"></i> Load more </a>
                    </div>

                </div>
                <!-- end timeline content-->

            </div> <!-- end tab-content -->
        </div> <!-- end card body -->
    </div> <!-- end card -->
</div> <!-- end col -->
</div>
<!-- end row-->

</div>
<!-- container -->

</div>
<!-- content -->

</div>


<div id="show-preview" data-controls-modal="show-preview" data-backdrop="static" data-keyboard="false" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="fullWidthModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-full-width">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="week-heading">Confirm to Post</h4>

            </div>
            <div class="modal-body" id="review-body">
                <img id="blah" class="p-3" style="height: 16em; width: 25em;" src="#" alt="your image" />

            </div>
            <div class="tab-content" id="review-footer">
                <input type="button" class="btn btn-info float-right m-3" data-dismiss="modal"  value="Done">
            </div>
          </div>
        </div>
      </div>
            

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
    <script>
         function file(){
            $('#file').click()
            console.log('hel');
         }      
        
         $('#post').click(function(){
            var text = $('#text').val()
            var data = {
                'csrfmiddlewaretoken' : '{{csrf_token}}',
                'text' : text
            }
            if(text.length < 1){
                $('#texterror').html('Field Required')
            }
            else{
            $.ajax({
                url : '/profile/',
                method : 'POST',
                data : data,
                dataType : 'json',
                success : function(data){
                    if(data == 'true'){
                    window.location.reload()
                    }
                }
            })
        }
         })
    </script>

    <script>

function readURL(input) {
    
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    
    reader.onload = function(e) {
        $('#show-preview').modal()
      $('#blah').attr('src', e.target.result);
    }
    
    reader.readAsDataURL(input.files[0]); // convert to base64 string
  }
}

$("#file").change(function() {
  readURL(this);
});

    </script>

{% endblock %}